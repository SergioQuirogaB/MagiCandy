<!DOCTYPE html>
<html lang="es">
        <head>
    <meta charset="UTF-8">
    <title> MagiCandy </title>
    <link rel="stylesheet" href="../DAHSPAGS/FormularioDB.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../IMG/Icono.ico">
        </head>
<body>
    <div class="sidebar close">
        <!-- LINK DE TODAS LAS PAGINAS -->
    <ul class="nav-links">
            <!-- INICIO -->
        <li>
            <a href="../DAHSPAGS/Ingreso.html">
                <i class='bx bx-home' ></i>
                <span class="link_name">Inicio</span>
            </a>
            <ul class="sub-menu blank">
                <li><a class="link_name" href="../DAHSPAGS/Ingreso.html">Inicio</a></li>
            </ul>
        </li>

        <!-- HOJA DE PERFIL -->
        <li>
            <a href="../DAHSPAGS/Perfil.html">
                <i class='bx bx-id-card' ></i>
                <span class="link_name">Perfil</span>
            </a>
            <ul class="sub-menu blank">
                <li><a class="link_name" href="../DAHSPAGS/Perfil.html">Perfil</a></li>
            </ul>
                </li>
        </li>
        <!-- HOJA DE VENTAS -->
            <li>
                <div class="iocn-link">
                <a href="../DAHSPAGS/ReporteVentas.html">
                <i class='bx bx-collection' ></i>
                <span class="link_name">Ventas</span>
                </a>
        <i class='bx bxs-chevron-down arrow' ></i>
            </div>
                <ul class="sub-menu">
                <li><a class="link_name" href="#">Ventas</a></li>
                <li><a href="../DAHSPAGS/ReporteVentas.html">- Reporte de ventas</a></li>
                </ul>
            </li>
        <li>
    <!-- MENU DE INVENTARIO CON SUB CATEGORIAS -->
        <div class="iocn-link">
            <a href="#">
            <i class='bx bx-book-alt' ></i>
            <span class="link_name">Inventario</span>
            </a>
            <i class='bx bxs-chevron-down arrow' ></i>
        </div>
            <ul class="sub-menu">
                <li><a class="link_name" href="#">Inventario</a></li>
                <li><a href="#"><u>Productos:</u></a></li>
                <li><a href="../DAHSPAGS/RegistraProducto.html">- Registra Productos</a></li>
                <li><a href="../DAHSPAGS/EntradaProducto.html">- Entrada Productos</a></li>
                <li><a href="#">- Consultar Productos</a></li>
                <li><a href="../DAHSPAGS/NovedadProducto.html">- Registrar Novedad</a></li>
                <li><a href="#"><u>Insumos:</u></a></li>
                <li><a href="../DAHSPAGS/RegistraInsumo.html">- Registra Insumos</a></li>
                <li><a href="../DAHSPAGS/EntradaInsumo.html">- Entrada Insumos</a></li>
                <li><a href="#">- Consultar Insumos</a></li>
                <li><a href="../DAHSPAGS/NovedadInsumo.html">- Registrar Novedad</a></li>
                <li><a href="../DAHSPAGS/SalidaInsumo.html">- Registrar Salida</a></li>
            </ul>
    <!-- MENU DE PRODUCCION -->
        <li>
            <div class="iocn-link">
                <a href="#">
                    <i class='bx bx-history'></i>
                <span class="link_name">Producción</span>
                </a>
                <i class='bx bxs-chevron-down arrow' ></i>
        </div>
            <ul class="sub-menu">
                <li><a class="link_name" href="#">Producción</a></li>
                <li><a href="#"><u>Orden Producción:</u></a></li>
                    <li><a href="../DAHSPAGS/CrearOrden.html">- Crear Orden</a></li>
                    <li><a href="Error404.html">- Consultar Orden</a></li>
                <li><a href="#"><u>Actividades</u></a></li>
                    <li><a href="../DAHSPAGS/NuevaActividad.html">- Nueva Actividad</a></li>
                    <li><a href="Error404.html">- Consultar Actividades</a></li>
                <li><a href="#"><u>Novedades:</u></a></li>
                    <li><a href="../DAHSPAGS/GenerarNovedad.html">- Generar Novedad</a></li>
                    <li><a href="Error404.html">- Consultar Novedad</a></li>
            </ul>
        </li>

            <!-- PARA CERRAR SESION -->
        <li>
            <div class="profile-details">
                <a href="../INICIOPAGS/Inicio.html">
                    <i class="bx bx-log-out"></i>
                </a>
                <img src="../IMG/MGCwhite.jpg" width="90PX">
            </div>
        </li>
        </ul>
    </div>

        <section class="home-section">

            <div class="home-content">

                <i class='bx bx-menu' href="Inicio.html" ></i>
                <H3>Registrar Producto</H3><br>
                
            </div>

        </section>

            <section class="form-production" style="margin-top: 10%;">
                
                <label for="produccio-num">Registro de Producto</label><br><br><hr><br>

                <form action="../CRUD/guardarProducto.php" method="POST" onsubmit="return validateForm()" enctype="multipart/form-data">

                    <!-- PRODUCTO -->
                    <label for="pkid_producto">ID del producto:</label>
                    <input type="text" id="producto" style="font-size: large;" name="pkid_producto">

                    <!-- NOMBRE PRODUCTO -->
                    <label for="nombre_producto" style="margin-left: 15%;">Nombre del producto:</label>
                    <input type="text" id="nombre" style="font-size: large;" name="nombre_producto" required><br><br>

                    <!-- CATEGORIA -->
                    <label for="categoria" style="font-size: large;" >Categoría:</label>
                    <select name="categoria" id="categoria" style="font-size: large;">
                        <option value="gomas" style="font-size: large;">Gomas</option>
                        <option value="refrescos" style="font-size: large;">Refrescos</option>
                        <option value="acidos" style="font-size: large;">Ácidos</option>
                        <option value="chocolates" style="font-size: large;">Chocolates</option>
                    </select>

                    <!-- PRECIO UNITARIO -->
                    <label for="cantidad_producto" style="margin-left: 30.5%;">Precio Unitario:</label>
                    <input type="text" name="precio_unidad" id="cantidad" style="font-size: large;" required><br><br>

                    <!-- CANTIDADES -->
                    <label for="cantidad_producto">Cantidades:</label>
                    <input type="number" name="cantidad_producto" id="cantidad" style="font-size: large;" required>

                    <!-- IMAGEN DEL PRODUCTO -->
                    <label for="imagen_producto" style="margin-left: 18.5%;">Imagen del producto:</label><br><br>
                    <input type="file" name="imagen_producto" id="imagen" class="btn-archive" style="margin-left: 54%;"><br><br>

                    <!-- BOTON PARA CREAR PRODUCCION -->
                    <button type="submit" class="btn-crearPro" name="guardarProducto">Registrar producto ✔</button>
                    <a href="Ingreso.html"><button class="btn-cancelarPro">Cancelar registro ✖</button></a>
                    
                </form>


        </section><br><br>

<script>
    let arrow = document.querySelectorAll(".arrow");
        // Para que cuando de sobre las flechas salga subcategorias
    for (var i = 0; i < arrow.length; i++) {
    arrow[i].addEventListener("click", (e) => {
    let arrowParent = e.target.parentElement.parentElement; // seleccionar el elemento principal de la flecha EN EL MENU
    arrowParent.classList.toggle("showMenu"); // alternar la clase "showMenu" en el elemento principal EN EL MENU
});
    }
    let sidebar = document.querySelector(".sidebar");
    let sidebarBtn = document.querySelector(".bx-menu");
    console.log(sidebarBtn);

        // Agregar un evento de clic al botón de la barra lateral
    sidebarBtn.addEventListener("click", () => {
    sidebar.classList.toggle("close"); // cambia la clase "close o cerrar" en la barra lateral
});


// ========VALIDACION DEL FORMULARIO==========


        function validateForm() {
            const producto = document.getElementById('producto').value;
            const nombre = document.getElementById('nombre').value;
            const cantidad = document.getElementById('cantidad').value;

            const productoRegex = /^\d{7,13}$/;
            const nombreRegex = /^[a-zA-Z\s]+$/;

            let isValid = true;
            let errors = [];

            if (!productoRegex.test(producto)) {
                errors.push("El ID del producto debe contener entre 7 y 13 números.");
                isValid = false;
            }

            if (!nombreRegex.test(nombre)) {
                errors.push("El nombre solo debe contener letras y espacios.");
                isValid = false;
            }

            if (parseInt(cantidad) <= 0) {
                errors.push("La cantidad debe ser un número positivo mayor que 0.");
                isValid = false;
            }

            if (!isValid) {
                const errorContainer = document.getElementById('errorContainer');
                errorContainer.innerHTML = errors.join('<br>');
                return false; // Impedir el envío del formulario si hay errores
            }

            // Si todo es válido, el formulario se envía
            return true;
        }

</script>
</body>
</html>